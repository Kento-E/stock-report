# GitHub Copilot 指示事項

GitHub Copilot がこのリポジトリで作業を行う際は、以下の指示に必ず従ってください。

## 言語設定

- **すべての出力（Pull Request のタイトル、説明、コメント、コード内のコメント、ドキュメント等）は日本語で記述してください。**
- Pull Request の作成時は、タイトルと説明を必ず日本語で記述してください。
- コードレビュー時のコメントも日本語で記述してください。
- Issue への返信やコメントも日本語で記述してください。

## PR説明文の更新

- **PR説明文を更新する際は、既存のHTMLコメントを必ず保持すること**
  - 特に `<!-- for GitHub Copilot review rule -->` で囲まれた部分は絶対に削除しないこと
  - PRテンプレートの区切り線（`---`）以降の内容は常に保持すること
- **`report_progress` ツールを使用する際の注意**
  - PRテンプレートのHTMLコメントを含めた完全な説明文を渡すこと
  - 説明文の最後に必ず以下の形式でテンプレートのコメントを含めること:

```markdown
## 変更内容

（あなたの説明文）

<!-- ここにPRの説明を記載してください -->
<!-- 以下の区切り線とコメントは削除・変更しないでください -->

---

<!-- for GitHub Copilot review rule -->
<!--
必ず、日本語でレビューしてください。レビュー結果を日本語で記載してください。
PRのタイトルを修正すべきであれば指摘してください。
-->
<!-- for GitHub Copilot review rule -->
```

## Markdown ルール

Markdown ファイルを生成・編集する際の Lint ルールについては、<a>coding.instructions.md</a> を参照してください。

## コーディング規約

- 本プロジェクトは日本語コメントを推奨します。
- 変数名や関数名は英語でも構いませんが、説明やドキュメントは日本語で記述してください。
- 既存のコードスタイルに従ってください。

## ドキュメント・要件定義書の反映

ドキュメント作成・更新の詳細なガイドラインは <a>documentation.instructions.md</a> を参照してください。

### 基本原則

- ソースコードを修正した場合は、該当する仕様書にも必ず要件を反映してください。
- 要件定義書は機能別に分割されています。該当する仕様書を更新してください。
- DRY原則（Don't Repeat Yourself）を守り、情報の重複を避けてください。

### 仕様書の選択

変更内容に応じて、適切な仕様書を更新してください：

- **システム構成・モジュール変更**: <a>../specs/system-architecture.md</a>
- **データ収集・AI分析機能**: <a>../specs/data-collection-analysis.md</a>
- **レポート生成・メール配信**: <a>../specs/report-email.md</a>
- **自動化・テスト・CI/CD**: <a>../specs/automation-cicd.md</a>
- **銘柄リスト・投資志向性設定**: <a>../specs/data-management.md</a>

## GitHub Copilot Premium の効率的な利用

GitHub Copilot Premium の消費を節約しつつ、コード品質を維持するため、以下の方針に従ってください。

### テスト戦略

テスト自動化の詳細については <a>docs/TEST.md</a> を参照してください。

重要なポイント：
- Pull Request作成時に自動的にテストが実行されるため、手動でのテスト実施は不要
- 新規機能追加時は、既存のテストパターンに従って必要最小限のテストを追加
- ローカルでのテスト実行は、デバッグ時など必要な場合のみ実施

### ドキュメント方針

- **仕様書の更新は必須**: システムの機能や構成に変更があった場合、該当する仕様書への反映は必須です。
- **実用性の確認**: 新規ドキュメントの作成は、明確な実用性がある場合のみ行ってください。例えば、新しい機能の使用方法、複雑な設定手順、トラブルシューティングガイドなど。
- **既存ドキュメントの活用**: 以下の既存ドキュメントを優先的に更新してください。新規ファイルの作成は最小限に。
  - <a>README.md</a>: ユーザー向け使用方法・セットアップ手順
  - <a>docs/TEST.md</a>: テスト実行方法
  - <a>specs/requirements-index.md</a>: 要件定義インデックス
  - <a>../specs/*.md</a>: 機能別仕様書
- **サンプルやテンプレートファイル**: 実際に使用されないサンプルファイルやテンプレートファイルの作成は避けてください。

### 作業効率化

- **最小限の変更**: 問題を解決するために必要最小限のコード変更を心がけてください。
- **自動化の活用**: テスト、ビルド、デプロイなどは既存のGitHub Actionsワークフローを活用してください。
- **重複作業の回避**: 同じような処理が既に実装されている場合、既存のコードを再利用してください。
