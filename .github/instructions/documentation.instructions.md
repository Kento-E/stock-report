# ドキュメント作成ガイドライン

ドキュメントを作成・編集する際は、以下のルールを厳守してください。

## ドキュメントの責任分掌

各ドキュメントには明確な役割があります。内容を適切なファイルに配置してください：

### README.md

- **目的**: ユーザー向けクイックスタートガイド
- **内容**:
  - プロジェクトの概要
  - 必要な環境設定の概要
  - 基本的な実行手順
  - 高レベルの機能説明
- **避けるべき内容**: 詳細な技術仕様、詳細なトラブルシューティング、内部アーキテクチャ

### .github/specs/*.md（要件定義書）

- **目的**: システムの恒久的な仕様を記載
- **内容**:
  - システムの機能要件（データ収集、AI分析、レポート生成など）
  - 非機能要件（セキュリティ、パフォーマンス、拡張性など）
  - システム構成とモジュール設計
  - 利用技術とアーキテクチャ
  - 運用・保守方針
- **避けるべき内容**:
  - 特定のバグや警告の解決方法
  - トラブルシューティング手順
  - 特定の問題に対する暫定的な対応
  - 環境構築時の一時的な問題と解決策
  - 変更履歴（Gitで管理）
  - リリースノート的な内容（「〇〇を変更して△△%削減」など、変更の効果や理由の説明）

### docs/*.md（専門ドキュメント）

- **目的**: 特定の機能やシステムの詳細な説明
- **内容**:
  - 詳細なアーキテクチャ
  - フローダイアグラム
  - 技術的な詳細説明
  - 詳細なトラブルシューティング
  - セキュリティ考慮事項
  - ベストプラクティス
- **例**:
  - `docs/TEST.md`: ユニットテストの実行方法

### data/README.md

- **目的**: データファイルの編集ガイド
- **内容**:
  - データファイルの形式説明
  - 編集方法
  - 注意事項

### .vscode/README.md（VS Code設定ドキュメント）

- **目的**: VS Code固有の設定ファイルの詳細説明
- **内容**:
  - `.vscode/`内の設定ファイル（mcp.json、extensions.json等）の詳細な説明
  - セットアップ手順、前提条件、トラブルシューティング
  - 開発環境固有の技術的詳細
- **README.mdとの違い**: 
  - README.mdは「何ができるか」の概要とクイックスタート
  - .vscode/README.mdは「どう設定するか」の詳細手順
- **避けるべき内容**: システムアーキテクチャや機能要件（それらは.github/specs/へ）

## DRY原則（Don't Repeat Yourself）

情報の重複を避け、単一情報源（Single Source of Truth）を維持してください：

### 重複を避けるべき内容

1. **詳細な技術説明**: 1つの専門ドキュメントに記載し、他のドキュメントからは参照リンクで誘導
2. **設定値**: コード（設定ファイルなど）を情報源とし、ドキュメントからは参照リンクを使用
3. **手順**: 1箇所に詳細を記載し、他の場所では要約+参照リンクを使用

### 参照リンクの使用

重複を避けるため、詳細情報へは参照リンクを使用してください：

```markdown
詳細なアーキテクチャについては [docs/TEST.md](../../docs/TEST.md) を参照してください。

設定値については [設定ファイル](../../data/preferences.json) を参照してください。
```

### 情報の配置ルール

- **詳細情報は1箇所のみに記載**: 最も適切な専門ドキュメントに配置
- **概要は必要に応じて複数箇所に記載可**: ただし詳細へのリンクを含める
- **コードが情報源の場合**: ドキュメントには記載せず、コードへの参照リンクを使用

## 新規ドキュメント作成時のチェックリスト

新しいドキュメントを作成する前に、以下を確認してください：

1. **既存ドキュメントに追加できないか**: 既存の適切なドキュメントがあれば、そこに追加
2. **責任分掌は明確か**: このドキュメントの役割と対象読者が明確か
3. **重複はないか**: 他のドキュメントと重複する内容がないか
4. **参照リンクは適切か**: 詳細情報への適切な参照リンクがあるか

## 既存ドキュメント更新時のチェックリスト

ドキュメントを更新する際は、以下を確認してください：

1. **責任範囲内か**: そのドキュメントの責任範囲内の内容か
2. **重複が発生していないか**: 他のドキュメントとの重複が発生していないか
3. **参照リンクは更新されているか**: 関連する参照リンクが正しく更新されているか
4. **一貫性**: フォーマットやトーンが既存の内容と一貫しているか

## 例: 適切な配置

### 良い例

```markdown
<!-- README.md -->
株価データはAIで分析され、レポートが生成されます。
詳細は [specs/requirements-index.md](.github/specs/requirements-index.md) を参照してください。

<!-- .github/specs/requirements-index.md -->
（ここに詳細なシステム要件を記載）

<!-- docs/TEST.md -->
（ここに詳細なテスト手順を記載）
```

### VS Code設定の適切な配置パターン

VS Code固有の設定（例：開発ツール設定）を複数のドキュメントで扱う場合：

```markdown
<!-- README.md: 概要と利用効果のみ -->
### [機能名] サポート
本プロジェクトでは[機能]を利用できます。
- 機能A
- 機能B

詳細な設定方法は [.vscode/README.md](.vscode/README.md) を参照してください。

<!-- .vscode/README.md: 詳細な設定手順とトラブルシューティング -->
## [設定ファイル名]
### 機能
- 詳細な機能説明
### 使用方法
1. 前提条件
2. セットアップ手順
### トラブルシューティング
- 問題と解決方法

<!-- .github/specs/system-architecture.md: アーキテクチャ上の位置づけ -->
### [機能名]
アーキテクチャ上の概念・利用効果のみを記載。
設定の詳細は [.vscode/README.md](../../.vscode/README.md) を参照。
```

**ポイント**: 各ドキュメントは異なる目的を持ち、詳細情報は1箇所に集約し参照リンクで繋ぐ。

### 悪い例

```markdown
<!-- README.md -->
株価データはAIで分析され、レポートが生成されます。
システムは以下の5つのモジュールで構成されています...
（詳細すぎる）

<!-- .github/specs/requirements-index.md -->
（同じ内容が重複して記載されている）
```
